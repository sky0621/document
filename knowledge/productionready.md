# モノリスからマイクロサービスへ
## モノリスの不
### ・成長に応じたコードベース肥大化によりメンテナンスが困難
#### ・リファクタリング難(＝技術的負債蓄積)
#### ・デプロイ時間増加(＝即時反映できず、問題有無検出に時間がかかる)
#### ・運用コスト増加(1箇所の不具合が全体に影響。改修リリース＝サービス全体のリリース)
### ・負荷に応じた機能毎のスケールができない
### ・新テクノロジー採用が困難(サービス、組織が緩やかに古くなり人材採用難を招く)
## マイクロサービスによる不の解消
### マイクロサービスは、それぞれ責任をもって1つの機能をこなす小さなアプリケーション
### 小さなサービスゆえ、
#### ・コードベース肥大化軽減
#### ・負荷に応じてスケール可
#### ・サービスに適した新テクノロジー採用可
## マイクロサービスは複雑な生態系「エコシステム」として捉える
### レイヤ1：ハードウェア
#### 物理サーバ(AWS等クラウド含む)、コンテナ(Docker等)、構成管理(Ansible等)、ホストレベルの監視(Mackerel等)、ホストレベルのロギングが含まれる
### レイヤ2：通信
#### 他のレイヤ全てとつながり、境界は不明確
#### ネットワーク、DNS、RPC(他サービスの直接呼び出し)orメッセージング(SQS等)、APIエンドポイント、サービス検出(Consul等)、サービスレジストリ、負荷分散(ELB等)が含まれる
##### ※メッセージングには、RESTに比べ変更が難しく、中央集権的ゆえ単一障害点になりうる欠点がある
### レイヤ3：アプリケーションプラットフォーム
#### セルフサービス内部ツール、開発環境(最も安定性、信頼性が高いのは本番環境のミラー)、CI(Jenkins等)、マイクロサービスレベルの監視とロギング(TD等？)が含まれる
### レイヤ4：マイクロサービス
#### マイクロサービス及び固有の構成情報(構成管理、デプロイツール等)が含まれる
## マイクロサービスの不
### 逆コンウェイの法則
#### アーキテクチャに即した組織構造になる＝担当サービスへの専門分化でエコシステム全体視点が欠如
### 技術的スプロール(不規則な成長)
#### 技術、ツール、方式選定の自由＝100のサービス(チーム)があれば100の技術、ツール、方式がある
### 多種多様な障害発生
#### サービス間が通信により接続、依存するため、1サービスの障害がもたらす余波で起こりうる障害が多岐にわたる
### リソースの奪い合い
#### インフラリソースのみならずエンジニアリソースも奪い合う

# プロダクションレディ(本番対応可)なマイクロサービス